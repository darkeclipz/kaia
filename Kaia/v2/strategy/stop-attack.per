; stop attack after time elapsed
(defrule
    (timer-triggered t-stop-attack)
    =>
    (disable-timer t-stop-attack)
    (up-reset-attack-now)
    (set-strategic-number sn-number-attack-groups 0)
    (set-goal g-attacking no)
    (chat-local-to-self "stop attack")
)

; force stop attack
(defrule
    (goal g-attack no)
    =>
    (up-reset-attack-now)
    (set-strategic-number sn-number-attack-groups 0)
    (up-reset-target-priorities priority-offense 0)
    (set-goal g-attacking no)
)