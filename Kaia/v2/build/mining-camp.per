(defrule
    (goal g-build yes)
    (can-build-with-escrow mining-camp)
    (up-pending-objects c: mining-camp == 0)
(or (dropsite-min-distance gold > 4)
    (and(dropsite-min-distance stone > 4)
        (current-age >= castle-age)))
(or (unit-type-count-total villager >= 20)
    (current-age >= feudal-age))
    =>
    (release-escrow wood)
    (build mining-camp)
)
